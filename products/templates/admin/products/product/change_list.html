{% extends "admin/change_list.html" %}
{% load admin_urls static admin_list %}

{% block content_title %}
    <style>
        .brand-good { color: #28a745; }
        .brand-poor { color: #dc3545; }
    </style>
    
    <h1>{{ title }}</h1>
    
    <!-- Brand Hierarchy Dashboard -->
    <div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin: 20px 0;">
        <h2 style="margin-top: 0; color: #495057;">ğŸ“Š Brand â†’ Category â†’ Product Hierarchy</h2>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
            <div style="background: white; padding: 15px; border-radius: 6px; text-align: center; border-left: 4px solid #28a745;">
                <div style="font-size: 24px; font-weight: bold; color: #28a745;">{{ total_products }}</div>
                <div style="color: #6c757d;">Total Products</div>
            </div>
            <div style="background: white; padding: 15px; border-radius: 6px; text-align: center; border-left: 4px solid #007bff;">
                <div style="font-size: 24px; font-weight: bold; color: #007bff;">{{ active_products }}</div>
                <div style="color: #6c757d;">Active Products</div>
            </div>
            <div style="background: white; padding: 15px; border-radius: 6px; text-align: center; border-left: 4px solid #6f42c1;">
                <div style="font-size: 24px; font-weight: bold; color: #6f42c1;">{{ brands_count }}</div>
                <div style="color: #6c757d;">Brands</div>
            </div>
        </div>
        
        {% if brand_hierarchy %}
        <div style="background: white; border-radius: 6px; padding: 15px;">
            <h3 style="margin-top: 0; color: #495057;">ğŸ¢ Brand Breakdown</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                {% for brand_name, brand_data in brand_hierarchy %}
                <div style="border: 1px solid #e9ecef; border-radius: 4px; padding: 12px;">
                    <div style="font-weight: bold; margin-bottom: 8px;" class="{% if brand_name == 'Unknown Brand' %}brand-poor{% else %}brand-good{% endif %}">
                        {{ brand_name }} ({{ brand_data.total }} products)
                    </div>
                    <div style="font-size: 12px;">
                        {% for category, count in brand_data.categories.items %}
                            <span style="background: #e9ecef; padding: 2px 6px; border-radius: 3px; margin-right: 5px; margin-bottom: 3px; display: inline-block;">
                                {{ category }}: {{ count }}
                            </span>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        
        <div style="margin-top: 15px; padding: 10px; background: #e7f3ff; border-radius: 4px; border-left: 4px solid #007bff;">
            <strong>ğŸ’¡ Quick Actions:</strong>
            <ul style="margin: 5px 0; padding-left: 20px;">
                <li>Use filters on the left to browse by Brand or Category</li>
                <li>Select products and use "ğŸ”§ Fix brand names" to clean up data</li>
                <li>Use "ğŸ“‚ Organize by category" to standardize categories</li>
                <li>Export products using the marketplace-specific formats</li>
            </ul>
        </div>
    </div>
{% endblock %}

{% block content %}
    {{ block.super }}
{% endblock %} 